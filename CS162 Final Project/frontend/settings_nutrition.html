{% extends "base.html" %}

{% block title %}Nutrition Settings{% endblock %}
{% block head %}
    {{ super() }}
    <link rel = "stylesheet" href = "../signup.css"> 
    <link href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../base.css">
    <link rel="stylesheet" href="../settings_test.css">
{% endblock %}

{% block content %}
<div class="jumbotron jumbotron-fluid">
    <!-- Adding a sidebar locked to the jumbotron div  -->
    <div class="container-fluid mh-100">
        <div class="row">
            <div class="col">
                <nav id="sidebar">
                    <div class="sidebar-header mt-1 ml-3">
                        <h3>Settings</h3>
                    </div>
                    <div class="list-group list-group-flush ml-3 mt-5">
                        <a href="/settings/account" class="list-group-item list-group-item-action m-1 border border-dark">Account</a>
                        <a href="#" class="list-group-item list-group-item-action m-1 border border-dark">Nutrition</a>
                        <a href="/settings/saved-places" class="list-group-item list-group-item-action m-1 border border-dark">Saved Places</a>
                </nav>
            </div>

            <!-- Making the page content have a light purple background -->
            <div class="col col-9 h-100">
                <div class="card-body mt-1 ml-5 pl-5">
                    <h4 class="card-title">Your Nutrition</h4>
                    <h6 class="card-subtitle mb-2">Change your dietary preferences!</h6>

                    <!-- Food preferences -->
                    <h5 class="card-title mt-5 font-italic">Food Preferences</h5>
                    {% for diet in diets %}
                        <h4 class="card-subtitle mb-2">{{diet}}</h4>
                    {% endfor %}

                    <!-- Allergies -->
                    <h5 class="card-title mt-5 font-italic">Allergies</h5>
                    {% for allergy in allergies %}
                        <h4 class="card-subtitle mb-2">{{allergy}}</h4>
                    {% endfor %}


                    <!-- Changing your preferences -->

                    <a class="btn btn-primary mt-5" href="/settings/nutrition/preferences">
                        Add and/or Change Food Preferences
                    </a>
                    <a class="btn btn-primary mt-5" href="/settings/nutrition/allergies">
                        Add and/or Change Allergies
                    </a>

                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    function updatePassword() {
        var old_password = document.getElementById('old_password').value;
        var new_password = document.getElementById('new_password').value;
        console.log(old_password, new_password);
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                alert(this.responseText);
            }
        };
        xhttp.open("POST", "account/new-password", true);
        xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhttp.send("old_password=" + old_password + "&new_password=" + new_password);
    }
</script>
{% endblock %}
